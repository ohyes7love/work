<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>채번 API 요청</title>
  </head>
  <body>
    <h1>채번 API 요청</h1>
    <button class="" onclick="fn_getSeq();">seq요청</button>
    <button class="" onclick="fn_getCurrSeq();">현재Seq조회</button>
    <button class="" onclick="fn_getGuid();">guid요청</button>
    <div id="response"></div>
    <div id="date"></div><br/>
    <button class="" onclick="fn_setPreDate();">이전날짜로변경</button>
    <button class="" onclick="fn_setMaxSeq();">시퀀스최대값변경</button>
    <div id="response2"></div>
    <div id="date2"></div><br/>
    <script>
    	fn_setPreDate = () => {
            const url = 'http://localhost:9090/testApi/setPreDate'; // API URL
            
            const xhr = new XMLHttpRequest(); // XMLHttpRequest 객체 생성
            xhr.open('GET', url); // POST 요청 설정
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // Content-Type 설정
            xhr.onreadystatechange = function () { // 요청 상태 변화 이벤트 핸들러
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
	                const response = JSON.parse(xhr.responseText); // 응답 JSON 파싱
	                document.getElementById('response2').innerHTML = response.sequence; // 응답 데이터 출력
	                document.getElementById('date2').innerHTML = response.date;
                } 
            };
            xhr.send(); // JSON 데이터 전송
        }
        
        fn_setMaxSeq = () => {
            const url = 'http://localhost:9090/testApi/setMaxSeq'; // API URL
            
            const xhr = new XMLHttpRequest(); // XMLHttpRequest 객체 생성
            xhr.open('GET', url); // POST 요청 설정
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // Content-Type 설정
            xhr.onreadystatechange = function () { // 요청 상태 변화 이벤트 핸들러
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
	                const response = JSON.parse(xhr.responseText); // 응답 JSON 파싱
	                document.getElementById('response2').innerHTML = response.sequence; // 응답 데이터 출력
	                document.getElementById('date2').innerHTML = response.date;
                } 
            };
            xhr.send(); // JSON 데이터 전송
        }
    
        fn_getCurrSeq = () => {
            const url = 'http://localhost:9090/seqApi/getCurrentSeq'; // API URL
            
            const xhr = new XMLHttpRequest(); // XMLHttpRequest 객체 생성
            xhr.open('GET', url); // POST 요청 설정
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // Content-Type 설정
            xhr.onreadystatechange = function () { // 요청 상태 변화 이벤트 핸들러
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
	                const response = JSON.parse(xhr.responseText); // 응답 JSON 파싱
	                document.getElementById('response').innerHTML = response.sequence; // 응답 데이터 출력
	                document.getElementById('date').innerHTML = response.date;
                } 
            };
            xhr.send(); // JSON 데이터 전송
        }

        fn_getSeq = () => {
            const url = 'http://localhost:9090/seqApi/getSeq'; // API URL
            
            const xhr = new XMLHttpRequest(); // XMLHttpRequest 객체 생성
            xhr.open('GET', url); // POST 요청 설정
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // Content-Type 설정
            xhr.onreadystatechange = function () { // 요청 상태 변화 이벤트 핸들러
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
	                const response = JSON.parse(xhr.responseText); // 응답 JSON 파싱
	                document.getElementById('response').innerHTML = response.sequence; // 응답 데이터 출력
	                document.getElementById('date').innerHTML = '';
                } 
            };
            xhr.send(); // JSON 데이터 전송
        }

        fn_getGuid = () => {
            const url = 'http://localhost:9090/seqApi/getGuid'; // API URL
            const data = { // JSON 데이터
                sendChlCd: 'COR',
                sendSysNodeNo: 1,
                sendSysInstNo: 2
            };
            const xhr = new XMLHttpRequest(); // XMLHttpRequest 객체 생성
            xhr.open('POST', url, true); // POST 요청 설정
            xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // Content-Type 설정
            xhr.onreadystatechange = function () { // 요청 상태 변화 이벤트 핸들러
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
	                const response = JSON.parse(xhr.responseText); // 응답 JSON 파싱
	                document.getElementById('response').innerHTML = response.guid; // 응답 데이터 출력
	                document.getElementById('date').innerHTML = '';
                } 
            };
            xhr.send(JSON.stringify(data)); // JSON 데이터 전송
        }
    </script>
  </body>
</html>